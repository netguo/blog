进程的调度主要有两种，一是进程遇到设备操作，主动切换让位给其它进程。二是，进程的时间片到了，被动切换给其它进程。
具体选择哪一个进程执行，就是我们在进程调度算法里面谈到的，如果是普通进程就从红黑树中选择那个虚拟运行时间最小的。

### 进程上下文切换
我们提到进程切换时，往往提到上下文切换。那么进程的上下文有什么呢？
上下文切换主要干两件事情，一是切换进程空间，也即虚拟内存；二是切换寄存器和 CPU 上下文。
对于Linux的实现，相对比较简单，在内存中有一个TSS的数据结构tss_struct，TS寄存器指向，这个结构的地址。tss_struct存储的是所有寄存器里面的内容。进程上下文切换，只需要，把新的进程的寄存器中的值赋值给到tss_struct，cpu把值加载到寄存器既可。那么进程怎么把寄存器值给到tss_struct？在task_struck有一个字段thread存储寄存器的值。
那么寄存器的值切换了，栈，指令也都切换了。cpu继续运行就是下一个进程的指令内容了。

