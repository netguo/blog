一个应用的性能与可靠性是无法分开的，假设系统的TPS很高，可靠性不能保证，那整个系统的性能也是无法保证的。  
首先从可靠性来讲，最近的一些优化经验来讲，为保证应用的可靠性需要做到：
 
* 代码无明显的bug，这个是最基本的要求。如果一个外部调用在一些业务参数下还报NullPointException，那么系统的可靠性也无法保证。
* 严格的代码审核。一个随意的编写，无业务逻辑的错误，如果对系统了解不够，可能会影响到其它的业务场景。同样不合理的代码编写，可能会造成内存泄露，死锁等问题，如果线上出问题，便是服务不可用。 
* 线上应用多机。这个无论从哪个角度来讲都是可靠性的必要保证。线上Java应用启动一般都需要重新打包编译，没有热部署，一个发布，系统便不可用。从另一个角度来讲，就算没有发布，一个应用的可用性也无法保证100%的可用性，如果一个未知的ERROR，可能是网络原因，可以是内存泄露，可能是死锁都会造成服务的整体不可用。  
* 假设外部服务不可靠。一个应用难免会与外部服务交互，或者是数据源，或者是dubbo服务，在架构设计时需要做好每个服务不可用的假设，并做好相应的容错方式。  
* 合理并充分的线上日志。线上日志必须合理且充分，合理是指非必要的日志不需要输出，否则线上的日志文件飙升，对于日志的分析也不方便。充分是指需要覆盖必要的check点，例如线上的ERROR日志，与外部交互时的必要输出，完整业务事务的关键步骤的记录等。  
* 任何服务都需要监控，报警。服务的可靠性监控，需要包含CPU，内存，网络等硬件监控，以及应用的jvm，可用性等监控。除此之外，应用服务业务可靠性也需要监控，如一个完整的业务事务可靠性，一个完整事务一个时间段的失败次数，应用中关键点，需要的设置检查点，监控点。监控内容必须有合适的报警机制，减少问题的响应时间。  

性能，就是提高访问的速度，从业务应用的角度来说，需要针对具体耗时的点进行优化。总结一下之前的优化经验。  

* 缓存。提到性能优化，可能最常常提到的问题，缓存分为应用本地缓存与分布式内存数据库。在应用中使用缓存的地方，主要是为了提高查询性能。一个完整的业务流程常常有多次业务查询，如果此时都通过查库，那么这个业务流程耗时必定会久。一个实时性的接口，可以考虑将讲部分查询转义到缓存，提高响应时间。但是需要注意缓存的存储结构，相对于硬盘，内存的代价要高的多。  

* 异步。Java中的异步动作可以有多重方式，常用的异步线程，消息队列。异步线程的话，可以去做一些耗时久的动作，但是不影响一个完整业务流程的数据返回。消息队列，不仅仅可以操作异步化，也实现解耦，消息的存储，涉及较多的数据操作的可以通过消息队列来实现，避免在应用内存中，造成发布，应用宕机等操作的数据丢失。  

* 减少非必要的IO操作。一次TCP连接的耗时与一次CPU的计算耗时是不同数量级的。减少非必要的IO操作，可以将数据组装任务交付给CPU。例如可以通过一些批量查询操作减少IO次数。
