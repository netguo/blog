---
layout: post
title: "项目中的异常处理"
date: 2015-08-05 23:42:29 +0800
comments: true
categories: design   
---
<!--more-->
<!--more-->  
  
#### 异常分类 

java中异常分为两种，受检异常和运行时异常。      

从业务角度上来讲，异常可以分为业务操作相关异常和系统运行时异常，业务操作相关异常是指通过合理地提示，可以让用户避免的异常，如输入参数非法，非法操作等。而系统异常，通常是程序自身代码逻辑错误，如SQL，IO异常。
  
---  
    
#### 异常处理   
 
##### 在effective java中看到一些异常处理的细节如下：   
 
+  不要忽略异常。异常吃掉，后果很严重！    
+  优先使用标准异常。  
+  在细节消息中包含能捕获失败的信息。  
+  每个抛出异常的方法都有@throws注释文档。   
+  避免大量的受检，如果一个系统中有大量的受检异常，程序中会有多个异常处理代码。   
+  永远不要为一个方法声明 throws Exception，这样的声明，没有为程序员提供关于这个方法能够抛出哪些异常，大大妨碍了该方法的使用。    
+  异常应该只用于异常的情况，它们永远不应该用于正常的控制流程。      
  
##### 返回结果：   
   
+ 接口返回结果，如果是业务操作相关异常，可以把具体的异常返回。  
+ 系统异常，用户对此类错误根本无能为力，可以统一返回为系统错误。  

##### 异常输出：  
logback，业务操作相关异常可以打印WARN，INFO日志。  
系统异常需要打印ERROR日志，便于错误的排查。
  
---  
  
#### 异常框架  
搭建异常框架有如下优点：  
  
+ 分离出异常处理程序  
+ 统一异常处理风格  
+ 降低耦合性  
+ 增强异常处理模块的复用程度     

异常处理框架往往是在最上层，委托给一个专门处理异常的service。该service负责拦截异常，并将处理特定的异常，将不同的response返回API。  

在Java web框架中，web层，service层，dao层的运行异常可以不用捕获，直接有异常处理service处理。  
受检异常，可以自己捕获或者有异常处理service捕获，这看异常框架的设计。  

参考：[http://www.ibm.com/developerworks/cn/java/j-lo-exceptionframework/](http://www.ibm.com/developerworks/cn/java/j-lo-exceptionframework/)
