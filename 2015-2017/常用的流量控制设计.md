
### 限流目的
现在web应用在nginx层都做了一层流量的控制，考虑到一些接口不对外发布，以及Java自身应用灵活限流方式。在Java应用中做一定的限流是很有必要的。

### 常用的限流方式
目前有几种常见的限流方式：
* 通过限制单位时间段内调用量来限流
* 通过限制系统的并发调用程度来限流
* 使用漏桶（Leaky Bucket）算法来进行限流
* 使用令牌桶（Token Bucket）算法来进行限流

#### 限制单位时间段内的调用量来限流
单位时间段内的限流，指在一定的时间段内，限制多少流量。这个就需要考量时间段的阈值，已经该时间段内的流量阈值。该算法难点在于这两个阈值难以设定，一般的应用都会存在高峰，低峰。统一的设定，需要评估好高峰段。应用访问如果存在突发的流量调用，该算法比较难以去适应，如果一个突发流量，在我们指定的时间阈值内必定大量的被拒绝。
实现方式：
可以通过一个map或者一个数组维护指定一个时间段的流量阈值，调用一次，数值加一，达到阈值，该请求拒绝。

#### 限制系统的并发调用程度限流

 